# ğŸ¦ ì€í–‰ì°½êµ¬ë§¤ë‹ˆì € README.md
>í”„ë¡œì íŠ¸ ê¸°ê°„ 2022.06.27 ~ 2022.07.08
>
>íŒ€ì› : [unchain123](https://github.com/unchain123), [BaekGom](https://github.com/Baek-Gom-95)/ ë¦¬ë·°ì–´ : [ì œì´í¬](https://github.com/jryoun1)
## ëª©ì°¨

- [í”„ë¡œì íŠ¸ ì†Œê°œ](#í”„ë¡œì íŠ¸-ì†Œê°œ)  
- [ê°œë°œì ì†Œê°œ](#ê°œë°œì-ì†Œê°œ)  
- [Preview](#Preview)  
- [UML](#UML)  
- [í‚¤ì›Œë“œ](#í‚¤ì›Œë“œ)  
- [PRë©”ì„¸ì§€](#PRë©”ì„¸ì§€)  
    - [STEP1ì—ì„œ PRë‚´ìš©](#STEP1PR)
    - [STEP2ì—ì„œ PRë‚´ìš©](#STEP2PR)
    - [STEP3ì—ì„œ PRë‚´ìš©](#STEP3PR)

## í”„ë¡œì íŠ¸ ì†Œê°œ
- LinkedListë¥¼ í™œìš©í•œ ííƒ€ì…ì„ êµ¬í˜„í•˜ê³  ë™ê¸° ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ í†µí•´ ì€í–‰ì—…ë¬´ êµ¬í˜„

## ê°œë°œì ì†Œê°œ
|ë°±ê³°|ì–¸ì²´ì¸|
|:---:|:---:|
|<img src=https://i.imgur.com/c17eEk8.jpg width=250 height = 250>|<img src="https://i.imgur.com/gEAc4rf.png" width="250" height="250">|
|[BaekGom](https://github.com/bar-d)|[unchain123](https://github.com/unchain123)|



## Preview
## ì•± ë™ì‘ í™”ë©´
|ì€í–‰ì—…ë¬´í™”ë©´|ì˜ëª»ëœì…ë ¥ í›„ 2ë²ˆì…ë ¥í•´ì„œ ì•±ì¢…ë£Œ|
|:---:|:---:|
|<img src=https://i.imgur.com/FIlc4qM.gif width = 250 height =450>|<img src=https://i.imgur.com/ZAlwVSk.gif width=250 height=450 >|

## UML
![](https://i.imgur.com/Gt80eRY.jpg)


## ê°œë°œí™˜ê²½ ë° ë¼ì´ë¸ŒëŸ¬ë¦¬
[![swift](https://img.shields.io/badge/swift-5.6-orange)]() [![xcode](https://img.shields.io/badge/Xcode-13.4.1-blue)]()
[![iOS](https://img.shields.io/badge/14.0-000000.svg?style=flat&logo=iOS)]()

## PRë©”ì„¸ì§€
### [STEP1PR](https://github.com/yagom-academy/ios-bank-manager/pull/182)
### [STEP2PR](https://github.com/yagom-academy/ios-bank-manager/pull/193)
### [STEP3PR](https://github.com/yagom-academy/ios-bank-manager/pull/205)

## ê³µë¶€í•œì 
### ê²°í•©ë„ ë¶„ë¦¬
-ë¦¬ë·°ì–´ì—ê²Œ ë°›ì€ ë¦¬ë·°-
- STEP2 PRì´í›„ ì½”ë“œë‚´ì˜ ì€í–‰ì˜ ê²°í•©ë„ê°€ ë„ˆë¬´ ë†’ì•„ì„œ ì´ ê²°í•©ë„ë¥¼ ë¶„ë¦¬í•´ì£¼ëŠ”ê²Œ ì¢‹ê² ë‹¤ëŠ” ë¦¬ë·°ì–´ì˜ ë¦¬ë·°ë¥¼ ë°›ì•˜ìŠµë‹ˆë‹¤.
- ![](https://i.imgur.com/MaamMdg.png)
- ì²˜ìŒì— ê²°í•©ë„ë¥¼ ë‚®ì¶”ê¸° ìœ„í•´ íƒí•œ ë°©ë²•ì€ í”„ë¡œí† ì½œì„ ìƒì„±í•´ì„œ ì˜ì¡´ì„± ì£¼ì…ì„ í•´ì£¼ëŠ” ë°©ë²•ì´ì—ˆìŠµë‹ˆë‹¤.
- í•˜ì§€ë§Œ í”„ë¡œí† ì½œì„ ì„ íƒí•  ë•ŒëŠ” ê°ì²´ë“¤ì´ í•´ì•¼í•  ì¼(func)ì´ ê³µí†µì ìœ¼ë¡œ ìˆê±°ë‚˜, ê³µí†µì ìœ¼ë¡œ ê°€ì§€ê³  ìˆì–´ì•¼í•˜ëŠ” ë³€ìˆ˜ê°€ ìˆì„ ë•Œ ì‚¬ìš©í•˜ëŠ”ë° í”„ë¡œí† ì½œë¡œ ë§Œë“¤ì–´ì¤€ ì€í–‰ì›ì€ ì€í–‰ ë§ê³  ë‹¤ë¥¸ ê°ì²´ì—ì„  ì‚¬ìš©í•  ì´ìœ ê°€ ì—†ì—ˆê³  ì¶”í›„ ì€í–‰ì›ì˜ ìˆ˜ê°€ ì—¬ëŸ¬ëª…ì´ ëœë‹¤ë©´ ì´ í”„ë¡œí† ì½œì€ ì‚¬ìš©í•˜ì§€ ëª»í•˜ëŠ” ê²ƒ ê°™ë‹¤ëŠ” ë¦¬ë·°ì–´ì˜ ì˜ê²¬ì„ ë“£ê³  ë‹¤ì‹œ ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤.
```swift
struct Bank {
    private var customer: BankItemQueue<Customer>
    private let bankmanager: BankManager
    
init(customer: BankItemQueue<Customer>, bankmanager: BankManager) {
        self.customer = customer
        self.bankmanager = bankmanager
    }
}
```
- ìœ„ì˜ ì½”ë“œ ì²˜ëŸ¼ ì´ë‹ˆì…œë¼ì´ì €ë¥¼ ë§Œë“¤ì–´ì„œ ì€í–‰ì—ì„œ ì€í–‰ì›ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°›ëŠ”ê²Œ ì•„ë‹ˆë¼ ì€í–‰ì´ ë§Œë“¤ì–´ì§ˆ ë•Œ ê°™ì´ ìƒì„±í•´ ì¤Œìœ¼ë¡œì¨ ì˜ì¡´ì„ ì£¼ì…ì„ ì‹œì¼œì£¼ì–´ ê²°í•©ë„ë¥¼ ë‚®ì•„ì§€ê²Œ í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.
- 
### ì‹œê°„ì§€ì—° ë©”ì„œë“œ ì„ íƒ
- sleep ì€ Int íƒ€ì…ìœ¼ë¡œë§Œ ì„¤ì •ì´ ê°€ëŠ¥í•´ ìš”êµ¬ ì‚¬í•­ì„ ì¶©ì¡± ì‹œí‚¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤ ê·¸ë˜ì„œ ulseep ìœ¼ë¡œ ë³€ê²½í•˜ì˜€ì§€ë§Œ 1000000 ë‹¨ìœ„ë¡œ ì²˜ë¦¬ë¥¼í•´ ì¤‘ê°„ê³„ì‚°ìœ¼ë¡œ ì²˜ë¦¬ë¥¼ í•´ì¤˜ì•¼í•˜ëŠ” ë¶ˆí¸í•¨ì´ ìƒê²¨ Thread.sleepì´ ì‚¬ìš©ì„±ê³¼ ê°€ë…ì„±ì´ ë†’ì•„ ì±„íƒí–ˆìŠµë‹ˆë‹¤ 
```swift
Thread.sleep(forTimeInterval: customer.bankingType.bankingProcessingTime)
```
### ë ˆì´ìŠ¤ì»¨ë””ì…˜í•´ê²°
- DispatchSemaphore ë¡œ ì˜ˆê¸ˆ,ëŒ€ì¶œ ì—…ë¬´ì— ì ‘ê·¼í• ìˆ˜ìˆëŠ” ìŠ¤ë ˆë“œ ìˆ˜ ë¥¼ ì œí•œí•˜ì—¬ ë™ì¼í•œ ë°°ì—´ìš”ì†Œì— ë‹¤ë¥¸ ì“°ë ˆë“œê°€ ì ‘ê·¼ ëª»í•˜ê²Œ í–ˆìŠµë‹ˆë‹¤.
- í•´ê²°í•œ ì½”ë“œ
```swift
 private let depositSemaphore = DispatchSemaphore(value: NumberOfBankManager.deposit.rawValue)
    private let loanSemaphore = DispatchSemaphore(value: NumberOfBankManager.loan.rawValue)

private func giveTask(for customerList: BankItemQueue<Customer>) {
        var customerList = customerList
        while let completeCustomer = customerList.deQueue() {
            DispatchQueue.global().async(group: bankingGroup) {
                switch completeCustomer.bankingType {
                case .deposit:
                    self.depositSemaphore.wait()
                    self.bankmanager.handleBanking(for: completeCustomer)
                    self.depositSemaphore.signal()
                case .loan:
                    self.loanSemaphore.wait()
                    self.bankmanager.handleBanking(for: completeCustomer)
                    self.loanSemaphore.signal()
                }
            }
        }
    }
```
## íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

- ì²˜ìŒ UnitTestì‘ì„±ì‹œ testableì„ ì‚¬ìš©í•´ì„œ ì§„í–‰í•˜ë ¤ê³  í• ë•Œ ì•„ë˜ì™€ ê°™ì€ ë¬¸ì œê°€ ë°œìƒí•´ì„œ schemeì„ ì¶”ê°€í•˜ê³  íƒ€ê²Ÿì„ ì„¤ì •í•´ì„œ í•´ê²°ì„ í–ˆìŠµë‹ˆë‹¤.

|ë¬¸ì œí™”ë©´|í•´ê²°ë°©ë²•|í•´ê²°ë°©ë²•2|
|:---:|:---:|:---:|
|<img src="https://i.imgur.com/EPGfR5v.png" width="250" height="250">|<img src="https://i.imgur.com/G8JnAWA.png" width="250" height="250">|<img src="https://i.imgur.com/d3LSvvP.png" width="250" height="250">|

- ê·¸ í›„ì— UItest ì§„í–‰ì‹œ ì•„ë˜ì™€ ê°™ì€ ì—ëŸ¬ê°€ unchainì˜ ë§¥(M1)ì—ì„œë§Œ ë°œìƒí•˜ê³  baekgomì˜ ë§¥(Intel)ì—ì„œëŠ” ë°œìƒí•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.
```
Could not find module 'BankManagerConsoleApp' for target 'x86_64-apple-
macos'; found: arm64-apple-macos, 
at:/Users/kay/Library/Developer/Xcode/DerivedData/BankManagerConsoleApp-
acslyqhrplbojmgnotygnhtucvdv/Index/Build/Products/Debug/BankManagerConsoleApp
.swiftmodule
```
- ë¦¬ë·°ì–´ ë‹µë³€
> ê´€ë ¨ëœ ì˜¤ë¥˜ëŠ” ì°¾ì•„ë´¤ë”ë‹ˆ ì¼ë‹¨ íœ´ë¨¼ì—ëŸ¬ëŠ” ì•„ë‹Œ ê²ƒ ê°™ìŠµë‹ˆë‹¤.
M1ê³¼ Intelë§¥ì˜ ì°¨ì´ë¼ê¸°ë³´ë‹¤ëŠ” M1ì—ì„œ ì‚¬ìš©í•  ë•Œ ë¬¸ì œê°€ ìˆëŠ” ê²½ìš°ì¸ ê²ƒ ê°™ìŠµë‹ˆë‹¤.
ê´€ë ¨ëœ ì§ˆë¬¸ë“¤ê³¼ ë‹µë³€ì´ forumì— ìˆìœ¼ë‹ˆ í•œ ë²ˆ ì°¸ê³ í•´ë³´ì‹œë©´ ì¢‹ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ğŸ™ğŸ»
Apple forum

## ì°¸ê³ ë§í¬

[ë™ì‹œì„± í”„ë¡œê·¸ë˜ë°](https://yagom.net/courses/%eb%8f%99%ec%8b%9c%ec%84%b1-%ed%94%84%eb%a1%9c%ea%b7%b8%eb%9e%98%eb%b0%8d-concurrency-programming/)

[ë°°ì—´ ìš”ì†Œ ëœë¤ ì¶”ì¶œ](https://ppomelo.tistory.com/11)

[Thread-sleep](https://www.advancedswift.com/delay-function-sleep-thread-swift/)
