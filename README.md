# ğŸ¦ ì€í–‰ì°½êµ¬ ë§¤ë‹ˆì € ğŸ¦ -  Yettiâ˜ƒï¸, RedmangoğŸ¥­

## ğŸ“– ëª©ì°¨
1. [í”„ë¡œì íŠ¸ ì†Œê°œ](#-í”„ë¡œì íŠ¸-ì†Œê°œ) <br>
2. [íŒ€ì›](#-íŒ€ì›) <br>
3. [íƒ€ì„ ë¼ì¸](#-íƒ€ì„-ë¼ì¸) <br>
4. [ì‹œê°í™” êµ¬ì¡°](#-ì‹œê°í™”-êµ¬ì¡°) <br>
5. [ì‹¤í–‰ í™”ë©´](#-ì‹¤í–‰-í™”ë©´) <br>
6. [íŠ¸ëŸ¬ë¸” ìŠˆíŒ…](#-íŠ¸ëŸ¬ë¸”-ìŠˆíŒ…) <br>
7. [íŒ€ íšŒê³ ](#-íŒ€-íšŒê³ ) <br>
8. [ì°¸ê³  ë§í¬](#-ì°¸ê³ -ë§í¬) <br>

</br>

## ğŸ¦ í”„ë¡œì íŠ¸ ì†Œê°œ
ì€í–‰ì— ê³ ê°ì´ ì™”ì„ ë•Œ ê³ ê°ë“¤ì˜ ì—…ë¬´ì— ë”°ë¼ ì€í–‰ì›ë“¤ì´ ê°ìì˜ ì—…ë¬´ë¥¼ ì²˜ë¦¬í•´ì£¼ëŠ” ì•±
> í”„ë¡œì íŠ¸ ê¸°ê°„ 23/07/10 ~ 23/07/21

</br>

## ğŸ‘¨â€ğŸ’» íŒ€ì›
| â˜ƒï¸Yettiâ˜ƒï¸ | ğŸ¥­RedmangoğŸ¥­ |
| :--------: | :--------: |
| <Img src =  "https://hackmd.io/_uploads/rJj1EtKt2.png" width="200" height="200"> | <Img src = "https://hackmd.io/_uploads/HJ2D-DoNn.png"  width="200" height="200"> |
|[Yetti's Github](https://github.com/iOS-Yetti) |[Redmango's Github](https://github.com/redmango1447) |

</br>

## â±ï¸ íƒ€ì„ë¼ì¸
|ë‚ ì§œ|ë‚´ìš©|
|:--:|--|
|2023.07.10.| - Linked List ê¸°ë³¸ ê¸°ëŠ¥ êµ¬í˜„ |
|2023.07.11.| - ìœ ë‹›í…ŒìŠ¤íŠ¸ ì½”ë“œì¶”ê°€ |
|2023.07.12.| - Pull Request ì‘ì„± |
|2023.07.13.| - Bank, Banker, Customer íƒ€ì… êµ¬í˜„ |
|2023.07.14.| - íƒ€ì… ë³„ë¡œ ê¸°ëŠ¥ ë¶„ë¦¬ |
|2023.07.17.| - ë„¤ì´ë° ë¦¬íŒ©í† ë§, ë„¤ì„ìŠ¤í˜ì´ìŠ¤ êµ¬í˜„ |
|2023.07.19.| - BankTaskíƒ€ì… ìƒì„±, ì—…ë¬´ ë¶€ì—¬ ê¸°ëŠ¥ ì¶”ê°€
|2023.07.20.| - DispatchQueueë¥¼ í†µí•œ ë¹„ë™ê¸° êµ¬í˜„ |

</br>

## ğŸ‘€ ì‹œê°í™” êµ¬ì¡°
### ğŸŒ² File Tree
```
BankManagerConsoleApp
â”œâ”€â”€ main
â”œâ”€â”€ Bank
|    â”œâ”€â”€ BankManager
|    â”œâ”€â”€ Bank
|    â”œâ”€â”€ Banker
|    â”œâ”€â”€ BankTask
|    â”œâ”€â”€ Customer
â”œâ”€â”€ CustomerQueue
|    â”œâ”€â”€ CustomerQueue
|    â”œâ”€â”€ LinkedList
â””â”€â”€â”€â”€â”€â”€â”€ Node

BankManagerUIApp
â”œâ”€â”€ BankManagerUIApp
|    â”œâ”€â”€ App
|    |    â”œâ”€â”€ AppDelegate
|    |    â””â”€â”€ SceneDelegate
|    â”œâ”€â”€ Model
|    |    â”œâ”€â”€ BankManager
|    |    â”œâ”€â”€ CustomerQueue
|    |    â”œâ”€â”€ LinkedList
|    |    â””â”€â”€ Node
|    â”œâ”€â”€ View
|    |    â”œâ”€â”€ Main.storyboard
|    |    â””â”€â”€ LaunchScreen.storyboard
|    â”œâ”€â”€ Controller
|    |    â””â”€â”€ ViewController
|    â””â”€â”€ Resoruce
|         â””â”€â”€ Asset.xcassets
â”œâ”€â”€ BankManagerUIAppTests
|    â”œâ”€â”€ CustomelQueueTests
|    â””â”€â”€ BankManagerUIAppTests
â””â”€â”€ BankManagerUIAppUITests
     â””â”€â”€ BankManagerUIAppUITests
```
### ğŸ“ Diagram
![](https://hackmd.io/_uploads/SkK9zVD53.png)
</br>

## ğŸ“º ì‹¤í–‰ í™”ë©´
<img src="https://hackmd.io/_uploads/ryqXHcD53.gif" width="500">


## ğŸ§¨ íŠ¸ëŸ¬ë¸” ìŠˆíŒ…
###### í•µì‹¬ íŠ¸ëŸ¬ë¸” ìŠˆíŒ…ìœ„ì£¼ë¡œ ì‘ì„±í•˜ì˜€ìŠµë‹ˆë‹¤.
1ï¸âƒ£ **íŒŒì¼ ë³µì‚¬ì‹œ ì°¸ì¡°** <br>
-
ğŸ”’ **ë¬¸ì œì ** <br>
- ê¸°ì¡´ step1ì˜ Queueì™€ ê´€ë ¨ íƒ€ì…ì„ ëª¨ë‘ UIAppì— êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤ë§Œ step2ëŠ” ConsolAppì—ì„œ Queueë¥¼ ì´ìš©í•´ êµ¬í˜„ì„ ì‹œë„í•´ë³´ë¼ê³  í•˜ì˜€ìŠµë‹ˆë‹¤. ì´ ê²½ìš° ConsolAppì—ì„œ Queueë° ê´€ë ¨ íƒ€ì…ì„ ì°¾ì§€ ëª»í•˜ëŠ” ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.

ğŸ”‘ **í•´ê²°ë°©ë²•** <br>
- ìƒê°í•´ë‚¸ í•´ê²° ë°©ë²•ì€ 2ê°€ì§€ë¡œ
1. ConsolAppì—ì„œ  UIAppê³¼ ë˜‘ê°™ì€ ì´ë¦„ì˜ íŒŒì¼ì„ ë§Œë“¤ê³  ì½”ë“œë¥¼ ë³µì‚¬,ë¶™ì—¬ë„£ê¸° í•œë‹¤.
2. UIAppì—ì„œ ConsolAppìœ¼ë¡œ Xcodeë¥¼ ì´ìš©í•´ ë³µì‚¬í•˜ë˜ Create Folder Referancesë¥¼ ì„ íƒí•˜ê³  Copy items if neededë¥¼ ì²´í¬í•´ì œí•œë‹¤. ì¦‰ ì›ë³¸ íŒŒì¼ì„ ì°¸ì¡°í•˜ëŠ” íŒŒì¼ì„ ConsolAppë‚´ë¶€ì— ë§Œë“¤ë˜ ì‹¤ì œ í´ë”ì—ì„œ íŒŒì¼ì´ ìƒì„±ë˜ì§„ ì•Šê²Œ í•œë‹¤.

ì €í¬ëŠ” ë‘˜ ì¤‘ 2ë²ˆì§¸ ë°©ë²•ìœ¼ë¡œ ì§„í–‰í•˜ì˜€ìŠµë‹ˆë‹¤. ì¶”í›„ì— ì–´ë–»ê²Œ ë ì§„ ëª¨ë¥´ì§€ë§Œ ë³µì‚¬í•œ ëŒ€ìƒì¸ Queueì™€ LinkedList, Node íƒ€ì…ì€ ìë£Œêµ¬ì¡°ì˜ ì¼ì¢…ìœ¼ë¡œ ë‘ ê°œì˜ Appì—ì„œ ë³„ê°œì˜ ì‘ë™ì›ë¦¬ë¥¼ ê°€ì§€ê³  ìˆì§€ ì•Šì„ ê²ƒìœ¼ë¡œ ì˜ˆìƒë˜ê³  ë˜í•œ ì¶”í›„ ë³€í˜•ë  ì—¬ì§€ë„ ì ë‹¤ê³  ìƒê°í–ˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

<br>

2ï¸âƒ£ **ì—…ë¬´ë§ˆë‹¤ í ê´€ë¦¬í•˜ê¸°** <br>
-
ğŸ”’ **ë¬¸ì œì ** <br>
ì²˜ìŒ íë¥¼ êµ¬í˜„í–ˆì„ ë•Œ ê° ê³ ê°ë§ˆë‹¤ ì—…ë¬´íƒ€ì…ì— ëŒ€í•´ì„œ ì§€ì •ì„ í•´ì¤€ í›„ í•˜ë‚˜ì˜ íì— ë‹´ì•„ì„œ ê´€ë¦¬ë¥¼ í•´ì£¼ì—ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì´ë ‡ê²Œ íë¥¼ êµ¬í˜„í•˜ê²Œë˜ë©´ ë¬¸ì œê°€ ìƒê²¼ìŠµë‹ˆë‹¤.
ì˜ˆë¥¼ ë“¤ì–´, ì˜ˆê¸ˆ ê³ ê°ì˜ ì—…ë¬´ê°€ ëª¨ë‘ ì¢…ë£Œë˜ì—ˆì§€ë§Œ ë‹¤ìŒ ëŒ€ê¸°í•˜ëŠ” ê³ ê°ì´ ëŒ€ì¶œ ê³ ê°ì¼ê²½ìš° ê·¸ ê³ ê°ì´ ë¹ ì§€ì§€ ì•Šìœ¼ë©´ ë‹¤ìŒ ì˜ˆê¸ˆ ê³ ê°ì„ ë°›ì„ ìˆ˜ ì—†ì–´ ë”œë ˆì´ê°€ ìƒê¸°ëŠ” ë¬¸ì œê°€ ë°œìƒí•˜ì˜€ìŠµë‹ˆë‹¤.

ğŸ”‘ **í•´ê²°ë°©ë²•** <br>
ê³ ê°ì˜ ì—…ë¬´ íƒ€ì…ë§ˆë‹¤ ë‹¤ë¥¸ íì— ë„£ì–´ì¤Œìœ¼ë¡œì¨ ì—…ë¬´ ì§„í–‰ì— íš¨ìœ¨ì„±ì„ ì¦ê°€ì‹œì¼œì£¼ì—ˆìŠµë‹ˆë‹¤.
```swift!
private var depositQueue: CustomerQueue<Customer> = CustomerQueue()
private var loanQueue: CustomerQueue<Customer> = CustomerQueue()

private func lineUp(_ customers: inout [Customer]) {
        for number in 0..<customers.count {
            customers[number].receiveQueueNumber(queueNumber: number + 1)
            
            switch customers[number].task {
            case .deposit:
                depositQueue.enqueue(customers[number])
            case .loan:
                loanQueue.enqueue(customers[number])
            }
        }
    }
```

<br>

3ï¸âƒ£ **ì€í–‰ì›ì´ ëŠ˜ì–´ë‚  ë•Œì˜ í™•ì¥ì„± ê³ ë ¤** <br>
-
ğŸ”’ **ë¬¸ì œì ** <br>
DispatchGroupì— ë„£ì–´ ì‚¬ìš©í•  DispatchWorkItemì„ ë§Œë“¤ì–´ ì£¼ê³  ê·¸ ë‚´ë¶€ì— ê°ê°ì˜ ì—…ë¬´ì— í•´ë‹¹í•˜ëŠ” ë¡œì§ì„ ì‘ì„±í•˜ì—¬ ì£¼ì—ˆìŠµë‹ˆë‹¤.í•˜ì§€ë§Œ ì´ë ‡ê²Œ ìƒì„±í•˜ê²Œ ë˜ë©´ ì€í–‰ì›ì´ ëŠ˜ì–´ë‚  ë•Œë§ˆë‹¤ ìƒˆë¡œìš´ DispatchWorkItemì„ ë§Œë“¤ì–´ì¤˜ì•¼í•˜ê³  ë˜ í•´ë‹¹ DispatchWorkItemì„ groupì— ë„£ì–´ì¤˜ì•¼í•˜ëŠ” ë²ˆê±°ë¡œì›€ì´ ìˆì—ˆìŠµë‹ˆë‹¤.
```swift!
let firstDepositWindow = DispatchWorkItem { [self] in
            while let depositCustomer = depositQueue.dequeue() {
                bankers[0].work(for: depositCustomer)
                countFinishedCustomer()
                checkWorkTime(from: bankers[0])
            }
        }
        
        let secondDepositWindow = DispatchWorkItem { [self] in
            while let depositCustomer = depositQueue.dequeue() {
                bankers[1].work(for: depositCustomer)
                countFinishedCustomer()
                checkWorkTime(from: bankers[1])
            }
        }
        
        let firstLoanWindow = DispatchWorkItem { [self] in
            while let loanCustomer = loanQueue.dequeue() {
                bankers[2].work(for: loanCustomer)
                countFinishedCustomer()
                checkWorkTime(from: bankers[2])
            }
        }
        
DispatchQueue.global().async(group: group, execute: firstDepositWindow)
DispatchQueue.global().async(group: group, execute: secondDepositWindow)
DispatchQueue.global().async(group: group, execute: firstLoanWindow)
```

ğŸ”‘ **í•´ê²°ë°©ë²•** <br>
ì€í–‰ì›ì˜ ìˆ˜ë¥¼ ì„¸ëŠ” ë°˜ë³µë¬¸ì„ í†µí•´ ë‚´ë¶€ì—ì„œ ì€í–‰ë­”ë§ˆë‹¤ ê°ê°ì˜ íë¥¼ êµ¬ë¶„í•´ ë¹„ë™ê¸°ì²˜ë¦¬ë¥¼ í•´ì£¼ëŠ” ë°©ì‹ìœ¼ë¡œ ìˆ˜ì •í•´ì£¼ì—ˆìŠµë‹ˆë‹¤. í•˜ë‚˜ì˜ ì—…ë¬´ë§ˆë‹¤ í•˜ë‚˜ì˜ DispatchWorkItemì„ ìƒì„±í•  í•„ìš”ê°€ ì—†ì–´ì§€ê³  ì½”ë“œ ì—­ì‹œ ë” ê°„ê²°í•´ì¡ŒìŠµë‹ˆë‹¤.
```swift!
for i in 0..<bankers.count {
            var queue: CustomerQueue<Customer>
            
            switch bankers[i].task {
            case .deposit:
                queue = depositQueue
            case .loan:
                queue = loanQueue
            }
            
            DispatchQueue.global().async(group: group) { [self] in
                while let customer = queue.dequeue() {
                    bankers[i].work(for: customer)
                    countFinishedCustomer()
                    checkWorkTime(from: bankers[i])
                }
            }
        }
```

## ğŸ‘¥ íŒ€ íšŒê³ 
### to. Redmango
- í”„ë¡œì íŠ¸ì—ì„œ ì†ë„ë¥¼ ì¶”êµ¬í•˜ì§€ì•Šê³  ì´í•´ì™€ ì •í™•ì„±ì„ ìš”í•˜ëŠ” ëª¨ìŠµì„ í†µí•´ í•™ìŠµì— ì–´ë–»ê²Œ ì„í•´ì•¼í•˜ëŠ”ì§€ ë§ì´ ë°°ìš°ëŠ” ê¸°ê°„ì´ì—ˆìŠµë‹ˆë‹¤!
- ì´ë²ˆ ì£¼ì— ì œê°€ ê°œì¸ì ì¸ ì¼ë¡œ ìë¦¬ë¥¼ ë¹„ìš°ëŠ” ì¼ì´ ë§ì•˜ëŠ”ë° ê·¸ëŸ¼ì—ë„ í•™ìŠµì— ì˜ì˜ë¥¼ ë‘ê³  ê³„ì† ê³µë¶€í•˜ê³  ê³ ë¯¼í•˜ì‹œëŠ” ëª¨ìŠµì´ ë„ˆë¬´ ì¢‹ì•˜ìŠµë‹ˆë‹¤!
### to. Yetti
- ì œê°€ ìƒê°í•˜ì§€ ëª»í•œ ê´€ì ìœ¼ë¡œ ì˜ê²¬ì„ ì œì‹œí•˜ì‹œëŠ”ê²Œ ìƒˆë¡œì› ìŠµë‹ˆë‹¤!
- ë°”ì˜ì‹  ì™€ì¤‘ì—ë„ ì–´ë–»ê²Œë“  ì‹œê°„ì„ ë‚´ì‹œëŠ” ëª¨ìŠµì´ ê°ë™ì´ì˜€ìŠµë‹ˆë‹¤!


## ğŸ“š ì°¸ê³  ë§í¬
- [inout íŒŒë¼ë¯¸í„°ì˜ í™œìš©](https://hyunsikwon.github.io/swift/Swift-Inout-01/)
- [sleep(forTimeInterval:)](https://developer.apple.com/documentation/foundation/thread/1413673-sleep)
- [DispatchGroup ê³µì‹ë¬¸ì„œ](https://developer.apple.com/documentation/dispatch/dispatchgroup)
- [ì°¨ê·¼ì°¨ê·¼ ì‹œì‘í•˜ëŠ” GCD â€” 7](https://sujinnaljin.medium.com/ios-%EC%B0%A8%EA%B7%BC%EC%B0%A8%EA%B7%BC-%EC%8B%9C%EC%9E%91%ED%95%98%EB%8A%94-gcd-7-4d9dbe901835)
- [ì•¼ê³°ë‹·ë„· - ë™ì‹œì„± í”„ë¡œê·¸ë˜ë°](https://yagom.net/courses/%eb%8f%99%ec%8b%9c%ec%84%b1-%ed%94%84%eb%a1%9c%ea%b7%b8%eb%9e%98%eb%b0%8d-concurrency-programming/)
