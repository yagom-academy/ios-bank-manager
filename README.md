# ğŸ¦ ì€í–‰ ì°½êµ¬ ë§¤ë‹ˆì €

- ì€í–‰ ì°½êµ¬ ì‹œë®¬ë ˆì´ì…˜ì…ë‹ˆë‹¤.
- ì‚¬ìš©ìì˜ ì…ë ¥ì„ ë°›ì•„ ì€í–‰ì„ ê°œì í•˜ë©´ 10ëª…~30ëª…ì˜ ì†ë‹˜ì´ ë°©ë¬¸í•©ë‹ˆë‹¤.
    - ì†ë‹˜ì˜ ì—…ë¬´ëŠ” ì˜ˆê¸ˆì—…ë¬´ í˜¹ì€ ëŒ€ì¶œì—…ë¬´ë¡œ ëœë¤í•˜ê²Œ ì§€ì •ë©ë‹ˆë‹¤.
- ì˜ˆê¸ˆì—…ë¬´ë¥¼ ì²˜ë¦¬í•˜ëŠ” ì€í–‰ì›ì€ 2ëª…, ëŒ€ì¶œì—…ë¬´ë¥¼ ì²˜ë¦¬í•˜ëŠ” ì€í–‰ì›ì€ 1ëª…ì…ë‹ˆë‹¤.
    - ì˜ˆê¸ˆì—…ë¬´ë¥¼ ì²˜ë¦¬í•˜ëŠ” ì€í–‰ì›ì€ ì—…ë¬´ì²˜ë¦¬ì— 0.7ì´ˆê°€ ì†Œë¹„ë˜ê³ , ëŒ€ì¶œì—…ë¬´ë¥¼ ì²˜ë¦¬í•˜ëŠ” ì€í–‰ì›ì€ ì—…ë¬´ì²˜ë¦¬ì— 1.1ì´ˆë¥¼ ì†Œë¹„í•©ë‹ˆë‹¤.
    - ì„¸ëª…ì˜ ì€í–‰ì›ì€ ë™ì‹œì— ì—…ë¬´ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤.
    - ê° ì€í–‰ì›ì€ ì†ë‹˜ë§ˆë‹¤ ì—…ë¬´ì‹œì‘ê³¼ ì—…ë¬´ë§ˆê°ì„ ì¶œë ¥í•©ë‹ˆë‹¤. 
- ëª¨ë“  ê³ ê°ì˜ ì—…ë¬´ê°€ ëë‚˜ë©´ ì—…ë¬´ë§ˆê°ì„ ì•Œë¦¬ê³  ì´ ê±¸ë¦° ì‹œê°„ì„ ì¶œë ¥í•©ë‹ˆë‹¤. 

## ğŸ“– ëª©ì°¨
1. [íŒ€ ì†Œê°œ](#-íŒ€-ì†Œê°œ)
2. [ê¸°ëŠ¥ ì†Œê°œ](#-ê¸°ëŠ¥-ì†Œê°œ)
3. [Diagram](#-diagram)
4. [í´ë” êµ¬ì¡°](#-í´ë”-êµ¬ì¡°)
5. [íƒ€ì„ë¼ì¸](#-íƒ€ì„ë¼ì¸)
6. [í”„ë¡œì íŠ¸ì—ì„œ ê²½í—˜í•˜ê³  ë°°ìš´ ê²ƒ](#-í”„ë¡œì íŠ¸ì—ì„œ-ê²½í—˜í•˜ê³ -ë°°ìš´-ê²ƒ)
7. [íŠ¸ëŸ¬ë¸” ìŠˆíŒ…](#-íŠ¸ëŸ¬ë¸”-ìŠˆíŒ…)
8. [ì°¸ê³  ë§í¬](#-ì°¸ê³ -ë§í¬)

## ğŸŒ± íŒ€ ì†Œê°œ
 |[inho](https://github.com/inho-98)|[ì¨ë‹ˆì¿ í‚¤](https://github.com/sunny-maeng)|
 |:---:|:---:|
| <img width="180px" img style="border: 2px solid lightgray; border-radius: 90px;-moz-border-radius: 90px;-khtml-border-radius: 90px;-webkit-border-radius: 90px;" src="https://user-images.githubusercontent.com/71054048/188081997-a9ac5789-ddd6-4682-abb1-90d2722cf998.jpg">| <img width="180px" img style="border: 2px solid lightgray; border-radius: 90px;-moz-border-radius: 90px;-khtml-border-radius: 90px;-webkit-border-radius: 90px;" src="https://avatars.githubusercontent.com/u/107384230?v=4">|

## ğŸ›  ê¸°ëŠ¥ ì†Œê°œ
|<img src="https://i.imgur.com/Qfi8qrR.gif" width=400>|<img src="https://i.imgur.com/zEMB0T0.png" width=350>|
|:-:|:-:|
|**1 ì…ë ¥ì‹œ ì‹¤í–‰í™”ë©´**|**ì˜ëª»ëœ ì…ë ¥ê³¼ 2 ì…ë ¥ì‹œ ì‹¤í–‰í™”ë©´**|

## ğŸ‘€ Diagram
|<img width=900, src="https://i.imgur.com/401PAu7.png)">|
|---|

## ğŸ—‚ í´ë” êµ¬ì¡°
```
BankManagerConsoleApp
â”œâ”€â”€ BankManagerConsoleApp
â”‚   â”œâ”€â”€ main
â”‚   â”œâ”€â”€ Customer
â”‚   â”œâ”€â”€ BankClerk
â”‚   â”œâ”€â”€ Bank
â”‚   â”œâ”€â”€ BankManager
â”‚   â”œâ”€â”€ BankingType
â”‚   â”œâ”€â”€ Queue
â”‚   â”‚   â”œâ”€â”€ Node
â”‚   â”‚   â”œâ”€â”€ LinkedList
â”‚   â”‚   â””â”€â”€ Queue
â”‚   â””â”€â”€ Protocol
â”‚       â””â”€â”€ Servable
â”œâ”€â”€ LinkedListTest
â”‚   â””â”€â”€ LinkedListTest
â””â”€â”€ QueueTest
    â””â”€â”€ QueueTest
```

## â° íƒ€ì„ë¼ì¸

### ğŸ‘Ÿ Step 1
|ë‚ ì§œ|êµ¬í˜„ ë‚´ìš©|
|--|--|
|22.10.31|`Node`&`LinkedList`&`Queue`íƒ€ì… êµ¬í˜„, ìœ ë‹› í…ŒìŠ¤íŠ¸ ì‘ì„±, `Cocoapods`ë¥¼ ì´ìš©í•œ `SwiftLint`ì ìš©|
|22.11.2|`gitignore`íŒŒì¼ ì¶”ê°€, ì†ŒìŠ¤ì½”ë“œê°€ ë‹´ê¸´ `Pods`íŒŒì¼ ì‚­ì œ|
<details>
<summary>Details - êµ¬í˜„ ë‚´ìš©ê³¼ ê¸°ëŠ¥ ì„¤ëª… </summary>

#### 1ï¸âƒ£ Node 
- `Generics` íƒ€ì…ì˜ ë°ì´í„°ë¥¼ ë‹´ì„ `data`í”„ë¡œí¼í‹°ì™€ ë‹¤ìŒ ë…¸ë“œ ì •ë³´ë¥¼ ë‚˜íƒ€ë‚´ëŠ” `next`í”„ë¡œí¼í‹°ë¥¼ ìƒì„±í•˜ì˜€ìŠµë‹ˆë‹¤.
#### 2ï¸âƒ£ LinkedList
- í íƒ€ì… êµ¬í˜„ì„ ìœ„í•œ `LinkedList`íƒ€ì…ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.
- ì²«ë²ˆì§¸ì™€ ë§ˆì§€ë§‰ ë…¸ë“œë¥¼ ë‹´ëŠ” `head`, `last`í”„ë¡œí¼í‹°ë¥¼ ìƒì„±í•˜ì˜€ìŠµë‹ˆë‹¤.
- íì— í•„ìš”í•œ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ê¸° ìœ„í•œ ë©”ì„œë“œë“¤ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.
    - `append(datda:)`
    - `removeFirst()`
    - `removeAll()`
#### 3ï¸âƒ£ Queue
- ë‹¤ì–‘í•œ íƒ€ì…ì˜ ë°ì´í„°ë¥¼ ë‹´ì„ ìˆ˜ ìˆë„ë¡ Genericsë¥¼ ì´ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.
- êµ¬í˜„í•´ì•¼í•  í•„ìˆ˜ ê¸°ëŠ¥ë“¤ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.
    - `isEmpty` 
    - `claer()`
    - `enqueue()`
    - `peek()` : ì‚­ì œì—†ì´ ì²«ë²ˆì§¸ ë…¸ë“œì˜ ë°ì´í„°ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.
    - `dequeue()`: ì²«ë²ˆì§¸ ë…¸ë“œë¥¼ ì‚­ì œí•˜ê³ , í•´ë‹¹ ë°ì´í„°ë¥¼ ë¦¬í„´í•©ë‹ˆë‹¤.
</details>

    
### ğŸ‘Ÿ Step 2
|ë‚ ì§œ|êµ¬í˜„ ë‚´ìš©|
|--|--|
|22.11.2|`Customer`&`Bank` íƒ€ì… êµ¬í˜„ ë° ë‚´ë¶€ ë¡œì§ ìˆ˜ì •|
|22.11.3|`BankManager`íƒ€ì… êµ¬í˜„ ë° `Bank`ì˜ ê¸°ëŠ¥ ì˜®ê¸°ê¸°, ê° íƒ€ì…ì˜ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ êµ¬í˜„ ë° ì ‘ê·¼ ì œì–´ ìˆ˜ì •|
|22.11.4|`BankManager`ì—ì„œ `CustomerQueue`ëŒ€ì‹  `Customer`ë§Œ ì „ë‹¬í•˜ë„ë¡ ìˆ˜ì •,`String)(format:)`ì´ìš©í•˜ì—¬ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ êµ¬í˜„ë°©ë²• ìˆ˜ì •|
<details>
<summary>Details - êµ¬í˜„ ë‚´ìš©ê³¼ ê¸°ëŠ¥ ì„¤ëª…</summary>
    
### 1ï¸âƒ£ `BankManager`
- `Bank`ì™€ `Customer`ë¥¼ ìƒì„±í•˜ê³ , í”„ë¡œê·¸ë¨ ì‹¤í–‰ ë° ì‚¬ìš©ì ì…ë ¥ì„ ë°›ëŠ” ë©”ì„œë“œë¥¼ ê°€ì§€ê³  ìˆëŠ” íƒ€ì…ìœ¼ë¡œ ì „ì²´ ì‹¤í–‰ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤.
    - `startManagement()`: ë©”ë‰´ë¥¼ë³´ì—¬ì£¼ê³  ì‚¬ìš©ì ì…ë ¥ì— ë”°ë¼ (1)ì€í–‰ë¬¸ì„ì—´ê±°ë‚˜ (2)ì¢…ë£Œí•©ë‹ˆë‹¤.
    - `setupBank()`: ì€í–‰ ê°ì²´ë¥¼ ë§Œë“¤ê³ , ì€í–‰ì—…ë¬´ë¥¼ ì§„í–‰í•˜ê¸°ìœ„í•œ ì¤€ë¹„ í›„ ì€í–‰ë¬¸ì„ ì—½ë‹ˆë‹¤.
    - `addCustomer(to bank: Bank)`: 10~30ëª… ì‚¬ì´ ê³ ê°ì„ ì€í–‰ì— ì „ë‹¬í•©ë‹ˆë‹¤.
    - [enum] `Constant` : BankManagerì˜ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì…ë‹ˆë‹¤.
### 2ï¸âƒ£ `Bank`
- ê³ ê° íì™€ ì€í–‰ ì—…ë¬´ì²˜ë¦¬ì— ê´€ë ¨ëœ ë©”ì„œë“œë“¤ì„ ê°€ì§€ê³  ìˆëŠ” íƒ€ì…ì…ë‹ˆë‹¤. 
    - `openBank()`: ì€í–‰ì˜ ë¬¸ì„ ì—½ë‹ˆë‹¤
    - `receive(customer: Customer)`: ì†ë‹˜ì„ ë°›ì•„ ì†ë‹˜ íì— ì¶”ê°€í•©ë‹ˆë‹¤.
    - `startBanking()`: ì€í–‰ì˜ ì—…ë¬´ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤.
    - `serveCustomer(number: Int)`: ì†ë‹˜ì„ í•œëª…ì”© ì‘ëŒ€í•©ë‹ˆë‹¤.
    - `closeBanking()`: ì€í–‰ ì—…ë¬´ì˜ ë§ˆê°ì„ ì•Œë¦½ë‹ˆë‹¤.
    - [enum] `Constant` : Bankì˜ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì…ë‹ˆë‹¤.
### 3ï¸âƒ£ `Customer`
- ê³ ê°ì„ ë‚˜íƒ€ë‚´ëŠ” íƒ€ì…ìœ¼ë¡œ í”„ë¡œê·¸ë¨ì—ì„œ í•„ìš”í•œ ëŒ€ê¸°ë²ˆí˜¸ë¥¼ í”„ë¡œí¼í‹°ë¡œ ê°€ì§€ê³ ìˆìŠµë‹ˆë‹¤.
</details>

### ğŸ‘Ÿ Step 3
|ë‚ ì§œ|êµ¬í˜„ ë‚´ìš©|
|--|--|
|22.11.7|`BankingType`&`DepositBankClerk`&`LoanBankClerk`íƒ€ì… êµ¬í˜„ ë° `BankClerk`í”„ë¡œí† ì½œ êµ¬í˜„|
|22.11.8|`Bank`ì™€ `BankManager`ë¡œì§ ë³€ê²½ ë° `main`ì‹¤í–‰ë¶€ êµ¬í˜„, </br> `BankClerk`->`Servable`í”„ë¡œí† ì½œë¡œ ë³€ê²½ `DispatchGroup` ì ìš©, `Date()`ë¥¼ ì´ìš©í•œ ì—…ë¬´ ì‹œê°„ ì¶œë ¥ êµ¬í˜„|
|22.11.9|`BankingType`ì„ ëœë¤í•˜ê²Œ ìƒì„±í•˜ëŠ” ë¡œì§ ë³€ê²½, `Bank`ì˜ í•¨ìˆ˜ ë„¤ì´ë°ìˆ˜ì •|

<details>
<summary>Details - êµ¬í˜„ ë‚´ìš©ê³¼ ê¸°ëŠ¥ ì„¤ëª…</summary>
    
### 1ï¸âƒ£ `Servable`
- ì€í–‰ì—ì„œ ì†ë‹˜ì„ ì‘ëŒ€í•  ë•Œ í•„ìš”í•œ íŠ¹ì§•ê³¼ ê¸°ëŠ¥ì„ ëª¨ì•„ë‘” í”„ë¡œí† ì½œ ì…ë‹ˆë‹¤. ì¼ì²˜ë¦¬í•˜ëŠ” ì‹œê°„ì„ ë‚˜íƒ€ë‚´ëŠ” `Double`íƒ€ì…ê³¼ ì€í–‰ ì°½êµ¬ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ì‹œë¦¬ì–¼íì¸ `DispatchQueue`íƒ€ì…ì˜ í”„ë¡œí¼í‹°ë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.
    - `serve(customer: Customer, group: DispatchGroup)`: ì „ë‹¬ë°›ì€ ì†ë‹˜ì— ëŒ€í•´ì„œ ë¹„ë™ê¸°ë¡œ ì—…ë¬´ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤.
    
### 2ï¸âƒ£ `BankClerk`
- `Servable`í”„ë¡œí† ì½œì„ ì±„íƒí•˜ê³  ìˆì–´, í”„ë¡œí† ì½œì´ ì œê³µí•˜ëŠ” ê¸°ë³¸ êµ¬í˜„ë“¤ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.`BankingType`ì„ í”„ë¡œí¼í‹°ë¡œ ê°€ì§€ê³ , ìì‹ ì˜ ì€í–‰ì—…ë¬´ íƒ€ì…ê³¼ ì¼ì¹˜í•˜ëŠ” ì†ë‹˜ì„ ìƒëŒ€í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.
### 3ï¸âƒ£ `BankingType`
- ì€í–‰ì—…ë¬´ì˜ ì¢…ë¥˜ë¥¼ ë‚˜íƒ€ë‚´ê¸° ìœ„í•œ ì—´ê±°í˜•ì…ë‹ˆë‹¤.
</details>

## âœ… í”„ë¡œì íŠ¸ì—ì„œ ê²½í—˜í•˜ê³  ë°°ìš´ ê²ƒ
- ë‹¨ë°©í–¥ `Linked-list` ìë£Œêµ¬ì¡°ì˜ ì´í•´ ë° êµ¬í˜„ </br>
    â˜‘ï¸ ë‹¨ë°©í–¥ ì—°ê²°ë¦¬ìŠ¤íŠ¸ë¥¼ ì½”ë“œë¡œ êµ¬í˜„í•´ë³´ê¸° </br>
    â˜‘ï¸ `Generic Type` ì´í•´ì™€ ì ìš©í•˜ê¸° </br></br>
- `Queue`ì˜ ìë£Œêµ¬ì¡°ì˜ ì´í•´ ë° êµ¬í˜„ </br>
    â˜‘ï¸ `Linked List`ë¥¼ ì´ìš©í•œ `Queue` íƒ€ì… ì½”ë“œë¡œ êµ¬í˜„í•´ë³´ê¸° </br>
    â˜‘ï¸ `Generic Type` ê°œë…ì´í•´ì™€ ì ìš©í•˜ê¸° </br>
    â˜‘ï¸ ì€í–‰ ê³ ê°(Customer)ì—…ë¬´ ì²˜ë¦¬ë¥¼ Queueì— ë‹´ì•„ ì°¨ë¡€ëŒ€ë¡œ ì²˜ë¦¬í•˜ê¸° </br></br>
- Enumì„ ì´ìš©í•œ namespace </br>
    â˜‘ï¸ enumì˜ ì¸ìŠ¤í„´ìŠ¤ìƒì„±ì´ ë¶ˆê°€ëŠ¥í•œ ì ì„ ì´ìš©í•´ `static let`ìœ¼ë¡œ ë„¤ì„ìŠ¤í˜ì´ìŠ¤êµ¬í˜„í•˜ê¸° </br>
    â˜‘ï¸ String(format:)ì„ ì´ìš©í•´ ë³€ìˆ˜ë¥¼ í¬í•¨í•œ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ êµ¬í˜„í•˜ê¸° </br></br>
- ë™ì‹œì„± í”„ë¡œê·¸ë˜ë° ì´í•´ ë° êµ¬í˜„ (Concurrency Programming)</br>
    â˜‘ï¸ GCD(Grand Central Dispatch)í™œìš©í•´ ë©€í‹° ìŠ¤ë ˆë“œ í™˜ê²½ êµ¬í˜„í•˜ê¸°</br>
    â˜‘ï¸ ë™ê¸°(Synchronous)ì™€ ë¹„ë™ê¸°(Asynchronous) ë™ì‘ì˜ ì´í•´ì™€ ì ìš©</br>
    â˜‘ï¸ Race Condition(ê²½ìŸ ìƒí™©) í•´ê²°í•˜ê¸° - `SerialQueue` í™œìš© / `DispatchSemaphore`í™œìš©</br></br>
- POP (Protocol Object Programming)</br>
    â˜‘ï¸ Protocolì˜ Extensionì— ê¸°ë³¸êµ¬í˜„(Defalult Implementation)í•˜ê¸°</br>
    â˜‘ï¸ Protocol ì±„íƒìœ¼ë¡œ íŠ¹ì • íƒ€ì…ì— ê¸°ëŠ¥ ë¶€ì—¬í•˜ê¸°</br> 

## ğŸš€ íŠ¸ëŸ¬ë¸” ìŠˆíŒ…
### 1ï¸âƒ£ `Bank`ì˜ ì—­í• ë¶„ë¦¬ì— ë”°ë¥¸ `BankManager`íƒ€ì… êµ¬í˜„
- ê¸°ì¡´ì—ëŠ” ë©”ë‰´ë¥¼ ë³´ì—¬ì£¼ê³ , ì‚¬ìš©ì ì…ë ¥ì„ ë°›ëŠ” ê¸°ëŠ¥ê³¼ ì†ë‹˜ì„ ë§Œë“œëŠ” ê¸°ëŠ¥ì„ `Bank`íƒ€ì…ì—ì„œ ìˆ˜í–‰í•˜ì˜€ìŠµë‹ˆë‹¤.
- ì´ ê¸°ëŠ¥ë“¤ì€ `Bank`ì˜ ì—­í• ì´ ì•„ë‹ˆë¼ê³  ìƒê°ë˜ì–´ ì´ë¥¼ ê´€ë¦¬í•˜ëŠ” `BankManager`íƒ€ì…ì„ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.
- `BankManager`ëŠ” ë©”ë‰´ë¥¼ ë³´ì—¬ì£¼ê³ , ì‚¬ìš©ìì…ë ¥ì— ë”°ë¼ì„œ `Bank`ì™€ `Customerí`ë¥¼ ìƒì„±í•˜ê³  ì½”ë“œì§„í–‰ì„ ê²°ì •í•©ë‹ˆë‹¤.
    ```swift
    struct BankManager {
        mutating func startManagement() {
            //ì‹¤í–‰ ë§¤ë‰´ì–¼ ì¶œë ¥
            print(Constant.options, terminator: Constant.empty)
            //ì‚¬ìš©ì ì…ë ¥        
            guard let input = readLine() else { return }
            ...
        }
    }
    ```
### 2ï¸âƒ£ `Bank`ì™€ `Customer Queue`ì˜ ë¶„ë¦¬ì— ë”°ë¥¸ ê° ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ë°©ë²•
- ê¸°ì¡´ì—ëŠ” `Bank`íƒ€ì… ë‚´ì—ì„œ `Queue<Customer>`ë¥¼ ìƒì„±í•˜ì—¬ ìì‹ ì˜ í”„ë¡œí¼í‹°ì— ì „ë‹¬í•˜ëŠ” ë°©ì‹ì„ ì´ìš©í–ˆìŠµë‹ˆë‹¤.
- ìœ„ì™€ ê°™ì´ êµ¬í˜„í•˜ë©´ `Customer`íƒ€ì…ì€ `Bank`ì¸ìŠ¤í„´ìŠ¤ê°€ ìˆì„ë•Œë§Œ ì¡´ì¬í•œë‹¤ëŠ” ë¬¸ì œê°€ ìˆì—ˆìŠµë‹ˆë‹¤.
- ë”°ë¼ì„œ `BankManager`ì— 10~30ëª…ìœ¼ë¡œ ì´ë£¨ì–´ì§„ ì†ë‹˜ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ê³ , `bank`ì¸ìŠ¤í„´ìŠ¤ì— ì „ë‹¬í•˜ëŠ” `addCustomer`ë©”ì„œë“œë¥¼ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.
- ì†ë‹˜ì„ ì „ë‹¬ë°›ì€ `bank`ëŠ” ìì‹ ì´ ê°€ì§€ê³  ìˆëŠ” íì— ì†ë‹˜ì„ ì¶”ê°€í•©ë‹ˆë‹¤.
    ```swift
    struct BankManager {
        private mutating func setupBank() {
            var bank = Bank() //bankì¸ìŠ¤í„´ìŠ¤ ìƒì„±
            
            addCustomer(to: &bank) //bankì— customerë¥¼ ì „ë‹¬
            bank.openBank()
        }

        private mutating func addCustomer(to bank: inout Bank) {
        let customerCount = Int.random(in: Constant.customerRange)
        
        for count in 1...customerCount {
            let customer = Customer.init(waitingNumber: count)
            bank.receive(customer: customer)
            }
        }
    }
    ```
### 3ï¸âƒ£ `bank`ë‚´ë¶€ ë©”ì„œë“œ ì ‘ê·¼ì œì–´ ì„¤ì •ì— ë”°ë¥¸ ë‚´ë¶€ ë¡œì§ ë³€ê²½
- ê¸°ì¡´ì—ëŠ” ì€í–‰ì˜ ì‘ì—…ì„ ì‹œì‘í•˜ê³  ëë‚´ëŠ” ë©”ì„œë“œì¸ `startBanking`ê³¼ `closeBanking`ë¥¼ íƒ€ì… ì™¸ë¶€ì¸ `BankManager`ì—ì„œ `bank`ë¥¼ ìƒì„±í•œë’¤ ê°ê° í˜¸ì¶œí–ˆìŠµë‹ˆë‹¤.
- ë‘ ë©”ì„œë“œë¥¼ íƒ€ì… ì™¸ë¶€ì—ì„œ í˜¸ì¶œí•  ìˆ˜ ìˆëŠ”ê²Œ ì¢‹ì§€ ì•Šì€ ë°©í–¥ì´ë¼ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤. ê²Œë‹¤ê°€ ì‘ì—…ì´ ëë‚¬ìŒì„ ì•Œë ¤ì£¼ëŠ” `closeBanking`ë©”ì„œë“œë¥¼ ì§ì ‘ í˜¸ì¶œí•˜ë©´ ì½”ë“œë¥¼ ëˆ„ë½í•˜ëŠ” íœ´ë¨¼ì´ìŠˆë„ ìˆë‹¤ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤. ì€í–‰ì˜ ì‘ì—…ì´ ëë‚˜ë©´ ìë™ìœ¼ë¡œ ë©”ì„œë“œê°€ í˜¸ì¶œë ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ê³ ë¯¼í–ˆìŠµë‹ˆë‹¤.
- ìœ„ ë‘ê°€ì§€ ê³ ë¯¼ì„ í•´ê²°í•˜ê¸° ìœ„í•´ `Bank`íƒ€ì…ì— `isOpen`í”„ë¡œí¼í‹°ì™€ `openBank`ë©”ì„œë“œë¥¼ ìƒì„±í•˜ê³ , `isOpen`í”„ë¡œí¼í‹°ì— í”„ë¡œí¼í‹° ì˜µì €ë²„ë¥¼ ì ìš©í•´ `didSet`ê°’ì— ë”°ë¼ ì€í–‰ì´ ë¬¸ì„ ì—´ë©´ `startBanking`, ë§ˆê°í•˜ë©´ `closeBanking`ì´ í˜¸ì¶œë˜ë„ë¡ ìˆ˜ì •í•˜ì˜€ìŠµë‹ˆë‹¤. íƒ€ì… ì™¸ë¶€ì—ì„œëŠ” `openBank`ë©”ì„œë“œë§Œ í˜¸ì¶œí•©ë‹ˆë‹¤. </br></br>
- **ì½”ë“œ ë³€ê²½ ë‚´ìš©** </br>
    â˜‘ï¸ ìˆ˜ì • ì „ 
    - íƒ€ì… ì™¸ë¶€ì—ì„œ ë©”ì„œë“œ ì ‘ê·¼ì´ ê°€ëŠ¥í–ˆìŠµë‹ˆë‹¤.
    ```swift
    struct BankManager {
        ...
        private mutating func setupBank() {
            var bank = Bank() 
            
            addCustomer(to: &bank) 
            bank.startBanking()
            bank.closeBanking()
        }
    }
    ```
    âœ… ìˆ˜ì • í›„
    - `isOpen`í”„ë¡œí¼í‹°ë¥¼ ì´ìš©í•´ ì™¸ë¶€ì—ì„œëŠ” `OpenBank` ë©”ì„œë“œë¡œë§Œ ì€í–‰ì— ì ‘ê·¼í•´ë„ ì€í–‰ì˜ ì—…ë¬´ëŠ” ìë™ìœ¼ë¡œ ì‹œì‘ë˜ê³  ë§ˆê°í•©ë‹ˆë‹¤.
    ```swift
    struct BankManager {
        ...
        private mutating func setupBank() {
            var bank = Bank()

            addCustomer(to: &bank)
            bank.openBank()
        }
    }

    struct Bank {
        ...
        private var isOpen: Bool {
            didSet {
                isOpen ? startBanking() : closeBanking()
            }
        }

        private mutating func serveCustomer(number: Int) { ... }
        private func closeBanking() { ... }
    }
    ```
    
### 4ï¸âƒ£ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— ë³€ìˆ˜ë¥¼ í¬í•¨í•˜ê¸° ìœ„í•œ `String(format:)`
- ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ìƒì„±í•˜ì—¬ ë¬¸ìì—´ì„ ë¬¶ì–´ì„œ ê´€ë¦¬í•˜ë ¤ í• ë•Œ, íŠ¹ì • êµ¬ë¬¸ì€ ë³€ìˆ˜ë¥¼ í¬í•¨í•˜ê³  ìˆì—ˆìŠµë‹ˆë‹¤.
- ê¸°ì¡´ì—ëŠ” í´ë¡œì €ë¥¼ ì´ìš©í•˜ì—¬ ì›í•˜ëŠ” ë³€ìˆ˜ë¥¼ ì „ë‹¬í–ˆìŠµë‹ˆë‹¤.
- ë¦¬ë·°ì–´ë‹˜ì˜ ì¡°ì–¸ìœ¼ë¡œ `String(format:, _:)`ë¥¼ ì•Œê²Œë˜ì–´ ì ìš©í–ˆìŠµë‹ˆë‹¤.</br></br>
- **ì½”ë“œ ë³€ê²½ ë‚´ìš©** </br>
    â˜‘ï¸ ìˆ˜ì • ì „ 
    - í´ë¡œì €ë¥¼ ì´ìš©í•´ ë³€ìˆ˜ë¥¼ í¬í•¨í•˜ëŠ” ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì…ë‹ˆë‹¤.
    ```swift
    enum Constant {
        static let startMessage = { ( number: Int ) -> String in
            return "\(number)ë²ˆ ê³ ê° ì—…ë¬´ ì‹œì‘"
        }
    }
 
    // ì‚¬ìš©
    func serveCustomer(number: Int) {
        print(Constant.startMessage(number))
    } 
    ```
    âœ… ìˆ˜ì • í›„
    - `String(format:, _:)`ì„ ì´ìš©í•´ ë³€ìˆ˜ë¥¼ í¬í•¨í•˜ëŠ” ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì…ë‹ˆë‹¤.
    ```swift
    enum Constant {
        static let startMessage = "%dë²ˆ ê³ ê° ì—…ë¬´ ì‹œì‘"
    }

    //ì‚¬ìš©
    private mutating func serveCustomer(number: Int) {
        print(String(format: Constant.startMessage, number))
    }
    ```
    
### 5ï¸âƒ£ `RaceCondition`í•´ê²°ë°©ë²• -`DispatchSemaphore` / `serialQueue`
- `BankClerk` 3ëª…ì´ `Queue`ì— ë‹´ê¸´ ì†ë‹˜(ì—…ë¬´)ì„ ë™ì‹œì— ì²˜ë¦¬í•˜ê²Œ í•˜ê¸°ìœ„í•´ì„œ `GCD`ë¥¼ ì´ìš©í•´ ë©€í‹°ì“°ë ˆë“œí™˜ê²½ì„ êµ¬í˜„í•´ì£¼ì—ˆìŠµë‹ˆë‹¤. 
- ì´ ê³¼ì • ì¤‘ì— í•˜ë‚˜ì˜ ë°ì´í„°(`CustomersQueue`)ì— ë™ì‹œì— ì ‘ê·¼í•˜ì—¬ ìƒê¸°ëŠ” `RaceCondition`ì„ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ ì—¬ëŸ¬ê°€ì§€ ì‹œë„ë¥¼ í•´ë³´ì•˜ìŠµë‹ˆë‹¤.</br></br>
- âœ… ğŸ‘‰ **`BankClerk`í”„ë¡œí¼í‹°ì— `serialQueue`ì‚¬ìš©**
    - RaceConditionì„ í•´ê²°í•˜ëŠ” ë°©ë²• ì¤‘ í•˜ë‚˜ì¸ `Async`ìƒí™©ì—ì„œ `SerialQueue`ë¥¼ ì´ìš©í•´ í•´ê²°í•˜ëŠ” ë°©ë²•ì„ ì ìš©í–ˆìŠµë‹ˆë‹¤.
    - 3ëª…ì˜ ì€í–‰ì›ë“¤ì´ ê°ìì˜ ì€í–‰ì—…ë¬´ì— ë§ëŠ” ì†ë‹˜ì„ ì¤„ì„¸ì›Œ ì°¨ë¡€ëŒ€ë¡œ ì‘ëŒ€í•˜ê¸° ìœ„í•´ ì€í–‰ì›ì˜ í”„ë¡œí¼í‹°ë¡œ ë³¸ì¸ì˜ ì‘ì—…ëŒ€ë¥¼ ì˜ë¯¸í•˜ëŠ” `counter`ë¥¼ ì¶”ê°€í•˜ì—¬ `DispatchQueue`ë¡œ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤. 
    - ì´ ë•Œ, ì€í–‰ì›ì€ í•œë²ˆì— í•œëª…ì˜ ì†ë‹˜ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ `serial`íë¡œ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.
    - BankëŠ” ì€í–‰ì›ë“¤ì—ê²Œ `Async`í•˜ê²Œ ì†ë‹˜ë“¤ì„ ë°°ë¶„ í•´ ì—¬ëŸ¬ëª…ì˜ ì€í–‰ì›ë“¤ì´ ë™ì‹œì— ê³ ê°ì„ ì²˜ë¦¬í•˜ë„ë¡ í•©ë‹ˆë‹¤.
    - ì€í–‰ì›ë“¤ì€ ë³¸ì¸ì˜ `counter`ì— ì¤„ì„œìˆëŠ” ì§ì›ì„ í•œëª…ì”© ì²˜ë¦¬í•˜ëŠ”ë° ì´ ì‘ì—…ì„ ì„¸ëª…ì´ ë™ì‹œì— ì§„í–‰í•©ë‹ˆë‹¤.
        ```swift
         while !customers.isEmpty {
            bankClerks.forEach { bankClerk in
                guard let customer = customers.dequeue() else { return }

                bankClerk.serve(customer: customer, group: group)
                ...
            }
        }

        func serve(customer: Customer, group: DispatchGroup) {
            counter.async(group: group) { //counterëŠ” ìì‹ ì˜ ì‹œë¦¬ì–¼ íì…ë‹ˆë‹¤.
                //ì—…ë¬´ ì‹œì‘ ë° ì¢…ë£Œ ì¶œë ¥
            }
        }
        ```
- **â˜‘ï¸ ğŸ‘‰ `DispatchSemaphore`ì‚¬ìš©**
    <details>
        <summary>details</summary>

    - ë™ì‹œì— ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ì†ë‹˜ì´ ì€í–‰ì› ì¸ì›ê³¼ ê°™ê¸° ë•Œë¬¸ì— `ì“°ë ˆë“œ ìˆ˜ = ì€í–‰ì› ì¸ì›` ì´ë¼ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤. 
    - `DispatchSemaphore`ì˜ `value = ì€í–‰ì› ì¸ì›` ìœ¼ë¡œ ì§€ì •í•˜ì—¬ ì€í–‰ì› ìˆ˜ë§Œí¼ë§Œ ë™ì‹œì§„í–‰ ë  ìˆ˜ ìˆë„ë¡ êµ¬í˜„í–ˆì—ˆìŠµë‹ˆë‹¤.
        ```swift
        struct Bank {
            let cumstomers: Queue<Customer> = Queue()
            let depositBankeClerks: [DopositBankClerk]// 2ëª…
            let loanBankClerks: [LoanBankClerk]  // 1ëª… 

            private mutating func startBanking() {
                let depositSemaphore = DispatchSemaphore(value: depositBankeClerks.count) // 2
                let loanSemaphore = DispatchSemaphore(value: loanBankClerks.count) // 1
                
                while !customers.isEmpty {
                    guard let customer = customers.dequeue() else {
                        return
                    }

                    DispatchQueue.global().async { [self] in
                        switch customer.bankingType {
                        case .deposit :
                            depositSemaphore.wait()
                         ğŸ‘‰ DepositBankClerk.serveCustomer(number: customer.waitingNumber)  //ì†ë‹˜ ì—…ë¬´ ì‹œì‘ê³¼ ëí”„ë¦°íŠ¸ ì¶œë ¥í•˜ëŠ” í•¨ìˆ˜
                            depositSemaphore.signal()
                        case .loan:
                            loanSemaphore.wait()
                         ğŸ‘‰ LoanBankClerk.serveCustomer(number: customer.waitingNumber) //ì†ë‹˜ ì—…ë¬´ ì‹œì‘ê³¼ ëí”„ë¦°íŠ¸ ì¶œë ¥í•˜ëŠ” í•¨ìˆ˜
                            loanSemaphore.signal()
                        }
                    }
                }
            }
        }

        struct DepositBankClerk {
            static func serveCustomer(number: Int) {
                // ì†ë‹˜ ì—…ë¬´ ì‹œì‘ê³¼ ëì„ Printí•˜ëŠ” ì½”ë“œ
            }
        }
        ```
    - ğŸ˜µì±„íƒí•˜ì§€ ì•Šì€ ì´ìœ ğŸ˜µ
        - 1) BankClerkì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ í™œìš©í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì´ì—ˆìŠµë‹ˆë‹¤.
            - BankClerkíƒ€ì…ì„ êµ¬í˜„í•´ë†“ê³ , `serveCustomer(number:)`ë¡œ ì†ë‹˜ì„ ì²˜ë¦¬í•˜ëŠ” í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•  ë•Œ, ì€í–‰ì› ê°ìì˜ ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì§€ ëª»í•´ì„œ ì˜ë„í•œ ë°©í–¥ê³¼ ë‹¤ë¥´ë‹¤ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤.
            - BankClerkì˜ ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œ ëŒ€ì‹  íƒ€ì…ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜, ì²˜ë¦¬ì†ë„ê°€ ê°™ê¸° ë•Œë¬¸ì— BankClerkì˜ í•œëª…ì˜ ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œë¥¼ ì´ìš©í•´ êµ¬í˜„ í•  ìˆ˜ ìˆì§€ë§Œ, ì¶”í›„ì— ì˜ˆë¥¼ë“¤ì–´, ê°™ì€ ì˜ˆê¸ˆì²˜ë¦¬ë¥¼ í•˜ëŠ” BankClerkë‘ ëª…ì˜ ì²˜ë¦¬ì†ë„ê°€ ì„œë¡œ ë‹¬ë¼ì§„ë‹¤ê³  í•  ë•Œ ì ìš©ì´ ì–´ë ¤ì›Œì§€ê¸° ë•Œë¬¸ì— BankClerkì˜ ê°ìì˜ ì¸ìŠ¤í„´ìŠ¤ê°€ ì²˜ë¦¬í•˜ëŠ”ê²Œ ë§ë‹¤ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤.
        - 2) 1)ì˜ ë¬¸ì œë¡œ ì• ì´ˆì— BankClerk íƒ€ì… êµ¬í˜„ì„ í•˜ì§€ì•Šê³  (ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•  ì¼ì´ ì—†ê²Œ ë˜ê³ ), Bank ë‚´ë¶€ì—ì„œ ê° ì€í–‰ì›ì˜ ì¸ì›ìˆ˜ë¥¼ Intë¡œ ê°–ëŠ” í”„ë¡œí¼í‹°ë¥¼ êµ¬í˜„í•˜ëŠ” ë°©ë²•ë„ ìƒê°í–ˆì—ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ê°ì²´ì§€í–¥ í”„ë¡œê·¸ë˜ë°ê³¼ ë§ì§€ ì•Šë‹¤ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤. </br></br>  
</details>

- **â˜‘ï¸ ğŸ‘‰ `serialQueue`ì‚¬ìš© & `customers Queue` ë¶„ë¥˜ì—†ì´ ì§ì ‘ ì²˜ë¦¬í•˜ê¸°**
    <details>
        <summary>details</summary>
    
    - ì±„íƒí•œ ì½”ë“œì—ì„œëŠ” ì†ë‹˜ì´ ë‹´ê²¨ìˆëŠ” `Queue`ë¥¼ ì€í–‰ì—…ë¬´ ì¢…ë¥˜ì— ë”°ë¼ `depositQueue`ì™€ `loanQueue`ë¡œ ë‹¤ì‹œ ë¶„ë¥˜í•´ì„œ `Queue`ì— ë‹´ì•„ì¤€ í›„ íƒ€ì…ì´ ê°™ì€ ì€í–‰ì›ì´ ì†ë‹˜ì²˜ë¦¬ë¥¼ í•˜ëŠ” ë¡œì§ì¸ë° ì†ë‹˜ë¶„ë¥˜ ì—†ì´ ì†ë‹˜ì˜ ì€í–‰ì—…ë¬´íƒ€ì…ì´ ì„ì—¬ìˆëŠ” ì›ë˜ì˜ `Queue`ì—ì„œ ë°”ë¡œ ì†ë‹˜ì²˜ë¦¬ë¥¼ í•  ìˆ˜ ìˆëŠ” ì½”ë“œë¥¼ êµ¬í˜„í•˜ê³  ì‹¶ì—ˆìŠµë‹ˆë‹¤. 
    - ì²˜ìŒì—” `bankClerk` ì´ ë‹´ê¸´ `Array`ì— `forEach`ë¥¼ ì‚¬ìš©í•´ ì—…ë¬´íƒ€ì…ì„ `Switch`ë¬¸ìœ¼ë¡œ êµ¬ë¶„í•´ì„œ ì†ë‹˜ì„ ì²˜ë¦¬í•˜ë„ë¡ êµ¬í˜„í•´ì£¼ì—ˆì—ˆìŠµë‹ˆë‹¤. ì˜ˆê¸ˆì€í–‰ì› ë‘ëª…ì´ ê³µí‰í•˜ê²Œ ë°˜ì”© ì°¨ë¡€ë¡œ ì†ë‹˜ì„ ì²˜ë¦¬í•˜ì§€ ì•Šê³  ì¤‘ê°„ì— ëŒ€ì¶œì†ë‹˜ì´ ê»´ìˆìœ¼ë©´ ìˆœì„œê°€ ê¼¬ì´ëŠ” ë¬¸ì œê°€ ìˆì—ˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ìˆœì„œì—ë§ê²Œ ì†ë‹˜ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ `bankClerk Array`ì—ì„œ í•œ ì€í–‰ì›ì”© ì°¨ë¡€ë¡œ ë¶ˆëŸ¬ì¤˜ì•¼í–ˆìŠµë‹ˆë‹¤. 0ë¶€í„° +1ì”© ì˜¬ë¼ê°€ëŠ” ë³€ìˆ˜ì— ì€í–‰ì§ì› ì¸ì›ë³´ë‹¤ ì»¤ì§€ë©´ ë‹¤ì‹œ 0ìœ¼ë¡œ ëŒì•„ê°€ë„ë¡ ì„¤ì •í•œ ë³€ìˆ˜ë¥¼ ì„ ì–¸í•˜ê³  `Array index`ë¡œ ì‚¬ìš©í•´ ì€í–‰ì›ì´ ë²ˆê°ˆì•„ê°€ë©° ì†ë‹˜ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ êµ¬í˜„í–ˆì—ˆìŠµë‹ˆë‹¤.
        ```swift
        func serveCustomer() {
            let depositMaximun = depositBankClerk.count - 1
            let loanMaximum = loanBankClerk.count - 1
            var depositPossible: Int = 0 {
                didSet(oldValue) {
                    depositPossible = oldValue > depositMaximun ? 0 : oldValue
                }
            }
            var loanPossible: Int = 0 {
                didSet(oldValue) {
                    loanPossible = oldValue > loanMaximum ? 0 : oldValue
                }
            }
            
            while !customers.isEmpty {
                guard let customer = customers.dequeue() else {
                    return
                }

                switch customer.bakingType {
                case .deposit:
                    depositBankClerk[depositPossible].call(customer: customer)
                    depositPossible += 1
                case .loan:
                    loanBankClerk[loanPossible].call(customer: customer)
                    loanPossible += 1
                }
            }
        }

        struct banker {
            func call(customer: Customer) {
                counter.async(group: group) {
                    // ì†ë‹˜ ì—…ë¬´ ì‹œì‘ê³¼ ëì„ Printí•˜ëŠ” ì½”ë“œ
                }
            }
        }
        ```
    - ğŸ˜µì±„íƒí•˜ì§€ ì•Šì€ ì´ìœ ğŸ˜µ
        - ì´ ì‹œë„ëŠ” `customers Queue`ë¥¼ `BankingType`ë³„ë¡œ ë¶„ë¥˜í•´ ë‹¤ì‹œ ë‘ê°œì˜ `Queue`(ì˜ˆê¸ˆë³„, ëŒ€ì¶œë³„)ë¥¼ ìƒì„±í•˜ëŠ” ì‘ì—…ì„ í•˜ì§€ ì•Šê¸° ìœ„í•´ ì‹œë„í•´ë³¸ ì½”ë“œì˜€ëŠ”ë°, ì‘ì„± í›„ì— ë¹„êµí•´ë³´ë‹ˆ `Queue`ë¥¼ ë¶„ë¥˜í•´ì„œ ì²˜ë¦¬í•˜ ì½”ë“œê°€ ë” ê¹”ë”í•˜ê³  ë³´ê¸° ì¢‹ì€ ê²ƒ ê°™ë‹¤ê³  íŒë‹¨í•´ì„œ ì±„íƒí•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.  
    </details>


### 6ï¸âƒ£ `Servable`í”„ë¡œí† ì½œê³¼ ìµìŠ¤í…ì…˜ì˜ í™œìš©(POP)
- ì€í–‰ì›ì˜ ì—…ë¬´ë¥¼ `ì†ë‹˜ì„ ì‘ëŒ€í•  ìˆ˜ ìˆëŠ”`ê¸°ëŠ¥ì´ë¼ íŒë‹¨í–ˆê³ , ì´ ê¸°ëŠ¥ì´ ì½”ë“œë¥¼ ì‘ì„±í•˜ëŠ” ì¤‘ê°„ì— ì¬ì‚¬ìš©ë˜ê¸°ë„ í•˜ì—¬ í”„ë¡œí† ì½œë¡œ ë¶„ë¦¬í•˜ì˜€ê³ , `extension`ì„ í†µí•´ ê¸°ë³¸ êµ¬í˜„ì„ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤. ì´ í”„ë¡œí† ì½œ ë‚´ì—ëŠ” ì€í–‰ì›ì´ ì†ë‹˜ì„ ì‘ëŒ€í•˜ëŠ” ê³¼ì •ì— í•„ìš”í•˜ë‹¤ê³  ìƒê°í•œ ìš”ì†Œë“¤ì„ í¬í•¨í•˜ì˜€ìŠµë‹ˆë‹¤.
- `counter: DispatchQueue`: ì€í–‰ ì°½êµ¬ë¥¼ ë‚˜íƒ€ë‚´ë©´ì„œ, ì½”ë“œ ì‹¤í–‰ì¤‘ì—ëŠ” ë¹„ë™ê¸°ë¡œ ì‘ì—…ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ ìš”ì†Œì…ë‹ˆë‹¤. ì€í–‰ì›ì€ í•œë²ˆì— í•œëª…ì˜ ì†ë‹˜ì„ ì²˜ë¦¬í•´ì•¼ í•˜ê³ , ìˆœì„œê°€ ì¤‘ìš”í•˜ê¸° ë•Œë¬¸ì— í•´ë‹¹ íë¥¼ `serial`ë¡œ ì´ˆê¸°í™” í•˜ì˜€ìŠµë‹ˆë‹¤.
- `serve(customer:, group:)`: ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ì€ ì†ë‹˜ì„ ìì‹ ì˜ ì‹œë¦¬ì–¼ íë¡œ ë¹„ë™ê¸° ì²˜ë¦¬í•œ í›„, ê³ ê°ê³¼ ì—…ë¬´ì¢…ë¥˜ë¥¼ ì¶œë ¥í•˜ê³ , ì²˜ë¦¬í•˜ëŠ” ê¸°ëŠ¥ì„ í•©ë‹ˆë‹¤.
    ```swift
    protocol Servable {
        var processingTime: Double { get }
        var counter: DispatchQueue { get }
        func serve(customer: Customer, group: DispatchGroup)
    }

    extension Servable {
        func serve(customer: Customer, group: DispatchGroup) {
            counter.async(group: group) {
                print("\(customer.waitingNumber)ë²ˆ ê³ ê° \(customer.bankingType.name)ì—…ë¬´ ì‹œì‘")
                ...
            }
        }
    }
    ```

### 7ï¸âƒ£ `Command Line Tool`ì—ì„œ `main`ìŠ¤ë ˆë“œì˜ ëŸ°ë£¨í”„ê°€ ì¢…ë£Œë˜ëŠ” ë¬¸ì œ
- í”„ë¡œì íŠ¸ë¥¼ ì‹¤í–‰í• ë•Œ, `DispatchQueue.main.async`ê°€ ì‘ë™ë˜ì§€ ì•Šê³ , ë‹¤ë¥¸ ìŠ¤ë ˆë“œì˜ ë¹„ë™ê¸° ì‘ì—…ë„ ëê¹Œì§€ ê¸°ë‹¤ë¦¬ì§€ ì•Šê³  í”„ë¡œê·¸ë¨ì´ ì¢…ë£Œë˜ëŠ” ë¬¸ì œê°€ ìˆì—ˆìŠµë‹ˆë‹¤. ì°¾ì•„ë³´ë‹ˆ `iOS`ì—ì„œëŠ” `main run loop`ë¥¼ ìë™ìœ¼ë¡œ ì„¤ì •í•´ ì£¼ì§€ë§Œ, `macOS`ì˜ `CLT`í™˜ê²½ì—ì„œëŠ” ê·¸ë ‡ì§€ ì•Šì•„ì„œ ì½”ë“œê°€ ëë‚˜ê¸° ì „ì— ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.
- ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ì²˜ìŒì—ëŠ” `Runloop.main.run(until:)`ë©”ì„œë“œë¥¼ í™œìš©í–ˆì§€ë§Œ, ë§¤ê°œë³€ìˆ˜ì— í•„ìš”í•œ ì‹œê°„ê°’ì´ ë¯¸ë¦¬ ê³„ì‚°í•  ìˆ˜ ì—†ëŠ” ë¬¸ì œê°€ ìˆì—ˆìŠµë‹ˆë‹¤.
- ìµœì¢…ì ìœ¼ë¡œ ì‚¬ìš©í•œ ì½”ë“œëŠ” ê¸°ë‹¤ë ¤ì•¼ í•˜ëŠ” ì‘ì—…ë“¤ì„ `DispatchGroup`ìœ¼ë¡œ ë¬¶ì–´ì„œ í•´ë‹¹ ê·¸ë£¹ì„ ê¸°ë‹¤ë¦¬ëŠ” `group.wait()`ë©”ì„œë“œë¥¼ ì´ìš©í•´ì„œ ì˜ë„í•˜ëŠ” ê²°ê³¼ë¥¼ ì¶œë ¥í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.
    ```swift
    let group = DispatchGroup()

    matchClerk(to: &customers.deposit, of: .deposit, group: group)
    matchClerk(to: &customers.loan, of: .loan, group: group)
    group.wait()
    ```

### 8ï¸âƒ£ ì€í–‰ ì—…ë¬´ì‹œê°„ì„ ê³„ì‚°í•˜ê¸° ìœ„í•œ `Date()`ì™€ `timeIntervalSinceNow`
- ì€í–‰ ì—…ë¬´ì— ì†Œìš”ëœ ì‹œê°„ì„ ê³„ì‚°í•´ì•¼ í–ˆìŠµë‹ˆë‹¤. ê³ ë¯¼í•œ ë¶€ë¶„ì€ "ì—…ë¬´ ì‹œì‘ ì‹œê°„ì„ ì–¸ì œë¡œ ë³¼ê²ƒì¸ê°€" ì˜€ìŠµë‹ˆë‹¤. `Bank`ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“œëŠ” ì‹œì ì— ì´ˆê¸°í™”í•  ìˆ˜ë„ ìˆì§€ë§Œ, ì €í¬ê°€ êµ¬í˜„í•œ ê¸°ëŠ¥ ì¤‘ ì†ë‹˜ì„ ì™¸ë¶€ì—ì„œ ë°›ëŠ” `receive(customer)`ë©”ì„œë“œì™€ ì†ë‹˜ì„ ì—…ë¬´ì¢…ë¥˜ì— ë”°ë¼ ë¶„ë¥˜í•˜ëŠ” `sortCustomer()`ë©”ì„œë“œ ì¤‘ê°„ì´ ì—…ë¬´ ì‹œì‘ì‹œê°„ìœ¼ë¡œ ì í•©í•˜ë‹¤ íŒë‹¨í•˜ì—¬ í•´ë‹¹ ì‹œì ì„ ê¸°ì¤€ìœ¼ë¡œ í•©ë‹ˆë‹¤. 
- ì´ ì—…ë¬´ ì‹œê°„ì€ `DispatchGroup`ìœ¼ë¡œ ì§€ì •í•œ ì—…ë¬´ë“¤ì´ ì¢…ë£Œë˜ëŠ” ê²ƒì„ ê¸°ë‹¤ë¦¬ëŠ” `group.wait()`ì´í›„ì— `Date`ì˜ `timeIntervalSinceNow`í”„ë¡œí¼í‹°ë¥¼ ì´ìš©í•˜ì—¬ ê³„ì‚°í•˜ì˜€ìŠµë‹ˆë‹¤.

### 9ï¸âƒ£ `BankingType`ì„ ëœë¤ìœ¼ë¡œ ìƒì„±í•˜ëŠ” ë°©ë²•
- ì†ë‹˜ë§ˆë‹¤ ì€í–‰ì—…ë¬´ ì¢…ë¥˜ë¥¼ ëœë¤í•˜ê²Œ ìƒì„±í•˜ê¸° ìœ„í•œ ë°©ë²•ìœ¼ë¡œ ì²˜ìŒì—ëŠ” `rawValue`ì™€ `BankingType(rawValue: Int.random(1...2)`ë¥¼ ì´ìš©í•˜ì—¬ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.
- `rawValue`ë¥¼ ì´ìš©í•˜ì§€ ì•ŠëŠ” ë°©ë²•ì„ ê³ ë¯¼í•˜ë‹¤ê°€ `CaseIterable`ì˜ `allCases`ë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤. </br></br>
- **ì½”ë“œ ë³€ê²½ ë‚´ìš©** </br>
    â˜‘ï¸ ìˆ˜ì • ì „ 
    - `rawValue`ë¥¼ ì´ìš©í•œ ë°©ë²•ì…ë‹ˆë‹¤.
    ```swift
    for count in 1...customerCount {
        guard let bankingType = BankingType.init(rawValue: Int.random(in: 1...2)) else { return }

        let customer = Customer.init(waitingNumber: count, bankingType: bankingType)
        bank.receive(customer: customer)
    }
    ```
    âœ… ìˆ˜ì • í›„
    - `CaseIterable`ì˜ `allCases`ì™€ `randomElement()`ë¥¼ ì´ìš©í•œ ë°©ë²•ì…ë‹ˆë‹¤.
    ```swift
    for count in 1...customerCount {
        guard let bankingType = BankingType.allCases.randomElement() else { return }
            
        let customer = Customer.init(waitingNumber: count, bankingType: bankingType)
        bank.receive(customer: customer)
    }
    ```

## ğŸ”— ì°¸ê³  ë§í¬

[ê³µì‹ë¬¸ì„œ]
- [Generics](https://docs.swift.org/swift-book/LanguageGuide/Generics.html)
- [Closures](https://docs.swift.org/swift-book/LanguageGuide/Closures.html)
- [Protocol Oriented Programming](https://developer.apple.com/videos/play/wwdc2015/408/)
- [sleep(forTimeInterval:)](https://developer.apple.com/documentation/foundation/thread/1413673-sleep)
- [Date](https://developer.apple.com/documentation/foundation/date)
- [timeIntervalSinceNow](https://developer.apple.com/documentation/foundation/date/1780473-timeintervalsincenow)
- [Concurrent Programming With GCD in Swift 3](https://developer.apple.com/videos/play/wwdc2016/720/)

[ê·¸ ì™¸ ì°¸ê³ ë¬¸ì„œ]
- [Thread.sleep and DispatchQueue.asyncAfter](https://www.advancedswift.com/delay-function-sleep-thread-swift/)
- [ë¸”ë¡œê·¸-String(format:)](https://beepeach.tistory.com/53) 
- [ë¸”ë¡œê·¸(ë‚ ì§„)-[iOS] ì°¨ê·¼ì°¨ê·¼ ì‹œì‘í•˜ëŠ” GCD â€” 1~17](https://sujinnaljin.medium.com/ios-%EC%B0%A8%EA%B7%BC%EC%B0%A8%EA%B7%BC-%EC%8B%9C%EC%9E%91%ED%95%98%EB%8A%94-gcd-grand-dispatch-queue-1-397db16d0305)
- [ì•¼ê³°ë‹·ë„· ë™ì‹œì„± í”„ë¡œê·¸ë˜ë°](https://yagom.net/courses/%eb%8f%99%ec%8b%9c%ec%84%b1-%ed%94%84%eb%a1%9c%ea%b7%b8%eb%9e%98%eb%b0%8d-concurrency-programming)
- [ì½”ë“œìŠ¤ì¿¼ë“œ-ì¡°ì„±ê·œPOP íŠ¹ê°•](https://youtu.be/9gkzHUsQiUc)
